package GUI;

import java.awt.BorderLayout;
import java.awt.event.*;
import java.util.ArrayList;
import java.util.List;

import javax.swing.AbstractButton;

import Application.Application;
import Test.Answer;

public class AnswerExerciseController implements ActionListener{
	
	private Application model;
	private Test view;
	
	public AnswerExerciseController(Application model, Test view){
		this.model = model;
		this.view = view;
	}

	@Override
	public void actionPerformed(ActionEvent arg0) {
		List<String> answers = new ArrayList<String>();
		if(view.getCenter().getOptions().isEmpty() == false){
			for(AbstractButton button : center.getOptions())
				if(button.isSelected())
					answers.add(button.getText());
		}
		else{
			answers.add(center.getField().getText());
		}
		for(Answer a : answer){
			if(a.getQuestion().equals(questions.get(i-1))){
				answer.remove(a);
				break;
			}
		}
		e.setCount(i-1);
		answer.add(e.answerQuestionTest(answers));
		if(i >= questions.size()) return;
		UIQuestion question = new UIQuestion(questions.get(i));
		i += 1;
		center.setVisible(false);
		center = question;
		view.add(question, BorderLayout.CENTER);
	}
	
}

}
