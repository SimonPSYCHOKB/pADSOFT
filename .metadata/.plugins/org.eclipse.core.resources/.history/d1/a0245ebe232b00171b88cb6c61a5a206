package GUI;

import java.awt.event.*;
import java.util.ArrayList;
import java.util.List;

import Application.*;

public class CoursesController implements ActionListener {

	private General view;
	private Application model;
	private Courses panel;
	
	@Override
	public void actionPerformed(ActionEvent arg0) {
		final List<Course> courses = model.getCourses();
		
		Object[][] objs = new Object[courses.size()][1];
		if(model.getTeacher().getName().equals(model.getTeacher())){
			
			int i = 0;
			for(Course c: courses){
				objs[i][0] = c.getTitle();
				i += 1;
			}
		}
		else{
			List<Course> visible = new ArrayList<Course>();
			for(Course c: courses){
				if(c.isVisibility()){
					visible.add(c);
				}
			}
			
			objs = new Object[visible.size()][1];
			int i = 0;
			for(Course c : visible){
				objs[i][0] = c.getTitle();
				i = i + 1;
			}
		}
		
		panel = new Courses(view, objs);
		
		panel.setController(new MouseAdapter()	{
			public void mouseClicked(MouseEvent e) {
				int row = panel.getTable().getSelectedRow();
				final Course selected = model.getCourses().get(row);
				UICourseEditable c = new UICourseEditable(selected, model);
				view.addPanel(c);
			}
		});		
	}
		
	public void setControllerJTable(MouseAdapter ma){
		panel.addMouseListener(ma);
	}

		
}
