package GUI;

import java.awt.BorderLayout;
import java.awt.event.*;
import java.util.ArrayList;
import java.util.List;

import javax.swing.AbstractButton;

import Application.Application;
import Test.Answer;
import Test.Exercise;
import Test.Question;

public class AnswerExerciseController implements ActionListener{
	private static List<Answer> answer = new ArrayList<Answer>();
	private static int i = 1;
	
	private Application model;
	private Test view;
	private Exercise e;
	
	public AnswerExerciseController(Application model, Test view, Exercise e){
		this.model = model;
		this.view = view;
		this.e = e;
	}

	@Override
	public void actionPerformed(ActionEvent arg0) {
		List<String> answers = new ArrayList<String>();
		List<Question> questions = e.getQuestions();
		if(view.getCenter().getOptions().isEmpty() == false){
			for(AbstractButton button : view.getCenter().getOptions())
				if(button.isSelected())
					answers.add(button.getText());
		}
		else{
			answers.add(view.getCenter().getField().getText());
		}
		for(Answer a : answer){
			if(a.getQuestion().equals(questions.get(i-1))){
				answer.remove(a);
				break;
			}
		}
		e.setCount(i-1);
		answer.add(e.answerQuestionTest(answers));
		if(i >= questions.size()) return;
		UIQuestion question = new UIQuestion(questions.get(i));
		i += 1;
		view.getCenter().setVisible(false);
		view.setCenter(question);
		view.add(question, BorderLayout.CENTER);
	}
	

}
