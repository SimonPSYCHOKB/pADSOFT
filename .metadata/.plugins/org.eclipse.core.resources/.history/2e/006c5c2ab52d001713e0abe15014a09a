package GUI;

import java.awt.FlowLayout;
import java.util.ArrayList;
import java.util.List;

import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.ListSelectionModel;
import javax.swing.SwingUtilities;
import javax.swing.table.DefaultTableModel;

import Statistics.CourseStatistic;

import Application.*;

public class CoursesStats extends JPanel{

	private static final long serialVersionUID = 1L;
	
	JTable course;
	
	public CoursesStats(Application model, General view){
		List<Course> courses = model.getCourses();
		
		String titles[] = {"Course", "Mean"};
		Object[][] objs = new Object[courses.size()][2];
		int i = 0;
		List<CourseStatistic> cs = new ArrayList<CourseStatistic>();
		for(Course cr : courses){
			CourseStatistic aux = new CourseStatistic(cr);
			cs.add(aux);
			objs[i][0] = cr.getTitle();
			objs[i][1] = aux.getMean();
			i += 1;
		}
		
		course = new JTable(objs, titles);
		DefaultTableModel tableModel = new DefaultTableModel(objs, titles){
			
			private static final long serialVersionUID = 1L;

			public boolean isCellEditable(int row, int column) {
				return false;
			}
		};
		course.setModel(tableModel);
		course.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
		course.setVisible(true);
		
		JScrollPane scrollBar = new JScrollPane(course);
		
		JPanel panel = new JPanel();
		panel.setLayout(new FlowLayout());
		panel.add(scrollBar);
		panel.setVisible(true);
		
		view.addPanel(panel);
		SwingUtilities.updateComponentTreeUI(view);
	}
	
	public void addController(MouseAdapter ma){
		course.addMouseListener(ma);
	}

}
