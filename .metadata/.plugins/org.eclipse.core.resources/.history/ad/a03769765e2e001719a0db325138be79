package GUI;

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.ArrayList;
import java.util.List;


import javax.swing.*;

import Statistics.CourseStatistic;


import Application.*;

public class StatsController implements ActionListener {

	private Application model;
	private General view;
	
	public StatsController(General view, Application model){
		this.view = view;
		this.model = model;
	}
	@Override
	public void actionPerformed(ActionEvent arg0) {
		
		List<Course> courses = model.getCourses();
		
		if(model.getCurrentUser().equals(model.getTeacher()))
		String titles[] = {"Course", "Mean"};
		Object[][] objs = new Object[courses.size()][2];
		int i = 0;
		List<CourseStatistic> c = new ArrayList<CourseStatistic>();
		for(Course cr : courses){
			CourseStatistic aux = new CourseStatistic(cr);
			c.add(aux);
			objs[i][0] = cr.getTitle();
			objs[i][1] = aux.getMean();
			i += 1;
		}
		
		CoursesStats cs = new CoursesStats(objs, titles);
		view.addPanel(cs);
		SwingUtilities.updateComponentTreeUI(view);
		cs.addController(new CoursesStatsController(model, view));		
		
	}

}
