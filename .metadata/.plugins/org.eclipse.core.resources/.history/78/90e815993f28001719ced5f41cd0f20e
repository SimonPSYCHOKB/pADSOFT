package GUI;

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.List;

import Application.Application;
import Application.Course;

public class CreateCourse implements ActionListener {
	
	private Application model;
	private General view;
	
	public CreateCourse(Application model, General view){
		this.model = model;
		this.view = view;
	}

	@Override
	public void actionPerformed(ActionEvent arg0) {
		final CreationCourse creation = new CreationCourse();
		creation.setControllerCancel(new ActionListener(){
			@Override
			public void actionPerformed(ActionEvent arg0) {
				creation.dispose();
			}	
		});
		creation.setControllerDone(new ActionListener(){
			@Override
			public void actionPerformed(ActionEvent arg0) {
				model.createCourse(creation.getVisibCheck(), creation.getTitleField(), creation.getDescField());
				
				List<Course> courses = model.getCourses();
				Object[][] objs = new Object[courses.size()][1];
				
				int i = 0;
				for(Course c: courses){
					objs[i][0] = c.getTitle();
					i += 1;
				}
				
				view.addPanel(new Courses(view, objs));
			}	
		});
	}

}
